{"head":{"layout":"Post","title":"npm: Tăng tốc và sử dụng offline","date":"2016-04-12T17:00:00.000Z","route":"tang-toc-npm","feature-img":"./feature-img.png","tags":["javascript"],"toc":false,"description":"Chắc chắn là ai đã từng làm việc với npm thì đều biết một điều rằng npm nó siêu chậm. Vì vậy mình hay hạn chế chạy npm install đến mức tối…"},"body":"<p>Chắc chắn là ai đã từng làm việc với npm thì đều biết một điều rằng npm nó siêu chậm. Vì vậy mình hay hạn chế chạy <code>npm install</code> đến mức tối thiểu và thường không nhận được patch update, ... cũng như nhiều vấn đề khác phát sinh. Trong bài viết này mình sẽ giới thiệu với các bạn một package không những giúp tăng tốc npm mà còn cho phép bạn cài đặt package offline.</p>\n<h1 id=\"local-npm\"><a href=\"#local-npm\" class=\"phenomic-HeadingAnchor\">#</a><a href=\"https://github.com/nolanlawson/local-npm\">local-npm</a></h1>\n<p><a href=\"https://github.com/nolanlawson/local-npm\">local-npm</a> sẽ tạo ra 1 replicate cho toàn bộ database của npm (chỉ hơn 1GB một tí thôi) cũng như là cache các package đã tải về. Vì vậy bạn sẽ không bao giờ tải một file 2 lần.</p>\n<h2 id=\"sử-dụng\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng\" class=\"phenomic-HeadingAnchor\">#</a>Sử dụng</h2>\n<ul>\n<li>Cài đặt</li>\n</ul>\n<pre><code class=\"hljs language-console\">npm install --global local-npm</code></pre>\n<ul>\n<li>Tạo một thư mục để chứa dữ liệu</li>\n</ul>\n<pre><code class=\"hljs language-console\">mkdir ~/local_npm</code></pre>\n<ul>\n<li>Chạy local-npm server</li>\n</ul>\n<pre><code class=\"hljs language-console\">local-npm -d ~/local_npm</code></pre>\n<ul>\n<li>Lúc này bạn sẽ thấy giao diện chính của chương trình xuất hiện</li>\n</ul>\n<p><img src=\"./local_npm.png\" alt=\"Giao diện của local-npm\"></p>\n<ul>\n<li>Thiết lập cho npm tải dữ liệu từ local-npm</li>\n</ul>\n<pre><code class=\"hljs language-console\">npm set registry http://127.0.0.1:5080</code></pre>\n<ul>\n<li>Nếu bạn không thích dùng local-npm nữa thì gõ lệnh</li>\n</ul>\n<pre><code class=\"hljs language-console\">npm set registry https://registry.npmjs.org</code></pre>\n<ul>\n<li>local-npm còn cung cấp cho bạn một giao diện kiểu như npm để bạn có thể duyệt các package offline. Nhưng bạn phải đợi cho local-npm replicate hoàn toàn database của npm về máy đã. Bạn có thể truy cập vào [http://localhost:5080/_browse/#/] để sử dụng</li>\n</ul>\n<p><img src=\"./ui.png\" alt=\"local-npm UI\"></p>\n<p>Vậy là xong. local-npm sẽ tự động replicate database của npm về, mỗi khi bạn tải một package nào về thì nó sẽ tự động cache, đảm bảo là bạn không bao giờ phải tải một file nào đó 2 lần.</p>\n<h1 id=\"tự-động-chạy-local-npm-khi-khởi-động-máy\"><a href=\"#t%E1%BB%B1-%C4%91%E1%BB%99ng-ch%E1%BA%A1y-local-npm-khi-kh%E1%BB%9Fi-%C4%91%E1%BB%99ng-m%C3%A1y\" class=\"phenomic-HeadingAnchor\">#</a>Tự động chạy local-npm khi khởi động máy</h1>\n<p>Ở đây mình hướng dẫn cho Ubuntu 15.04</p>\n<ul>\n<li>Mở dash và tìm kiếm Startup Applications</li>\n</ul>\n<p><img src=\"./dash.png\" alt=\"dash search\"></p>\n<ul>\n<li>Tạo mới một entry để tự khởi động command ở trên mỗi khi mở máy</li>\n</ul>\n<p><img src=\"./settings.png\" alt=\"startup setup\"></p>\n<p>Done. npm is not a jerk anymore. :D</p>\n","__filename":"tang-toc-npm/index.md","__url":"/tang-toc-npm/","__resourceUrl":"/tang-toc-npm/index.html","__dataUrl":"/tang-toc-npm/index.html.bfdc183c169060f648189d38b543292d.json"}